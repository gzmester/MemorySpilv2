<Window x:Class="MemorySpil.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:MemorySpil"
        mc:Ignorable="d"
        Title="Memory Spil" Height="500" Width="700"
        Background="LightGray"
        WindowStartupLocation="CenterScreen"
        ResizeMode="CanMinimize">

    <Border CornerRadius="10" BorderThickness="2" Background="#A86D3E" Opacity="0.98">
        <Border.BorderBrush>
            <LinearGradientBrush EndPoint="0.5,1" StartPoint="0.5,0">
                <GradientStop Color="Brown" Offset="0.9"/>
                <GradientStop Color="#A95656" Offset="1"/>
            </LinearGradientBrush>
        </Border.BorderBrush>

        <Grid>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="500"/>
                <ColumnDefinition Width="*"/>
            </Grid.ColumnDefinitions>
            
            <!-- KORT GRID - Her vises alle 16 kort automatisk -->
            <ItemsControl Grid.Column="0" Margin="5" ItemsSource="{Binding Cards}">
                <ItemsControl.ItemsPanel>
                    <ItemsPanelTemplate>
                        <UniformGrid Columns="4" Rows="4"/>
                    </ItemsPanelTemplate>
                </ItemsControl.ItemsPanel>
                <ItemsControl.ItemTemplate>
                    <DataTemplate>
                        <Button FontSize="32"
                                Width="110"
                                Height="110"
                                Margin="2"
                                Background="LightBlue"
                                Command="{Binding DataContext.CardClickCommand, RelativeSource={RelativeSource AncestorType=Window}}"
                                CommandParameter="{Binding}">
                            <Button.Style>
                                <Style TargetType="Button">
                                    <Setter Property="Content" Value="❓"/>
                                    <Style.Triggers>
                                        <DataTrigger Binding="{Binding IsFlipped}" Value="True">
                                            <Setter Property="Content" Value="{Binding Symbol}"/>
                                        </DataTrigger>
                                        <DataTrigger Binding="{Binding IsMatched}" Value="True">
                                            <Setter Property="Background" Value="LightGreen"/>
                                            <Setter Property="Content" Value="{Binding Symbol}"/>
                                        </DataTrigger>
                                    </Style.Triggers>
                                </Style>
                            </Button.Style>
                        </Button>
                    </DataTemplate>
                </ItemsControl.ItemTemplate>
            </ItemsControl>

            <!-- SIDE PANEL - Spillernavn, status og knapper -->
            <Border Grid.Column="1" CornerRadius="10" Background="#3A3D42" Opacity="1" Margin="5">
                <StackPanel Margin="10">
                    <!-- Spillernavn input -->
                    <TextBlock Text="Spillernavn:" Foreground="White" FontWeight="Bold" Margin="0,5"/>
                    <TextBox Text="{Binding PlayerName, UpdateSourceTrigger=PropertyChanged}" 
                             Height="25" FontSize="14" Margin="0,5"/>
                    
                    <!-- Game status -->
                    <TextBlock Text="{Binding GameStatus}" 
                               Foreground="White" 
                               FontWeight="Bold" 
                               FontSize="12"
                               TextWrapping="Wrap"
                               Margin="0,20,0,10"/>
                    
                    <!-- Nyt spil knap -->
                    <Button Content="Nyt Spil" 
                            Command="{Binding NewGameCommand}"
                            Height="35"
                            FontSize="14"
                            FontWeight="Bold"
                            Background="#A86D3E"
                            Foreground="White"
                            BorderThickness="0"
                            Margin="0,10"/>
                    
                    <!-- Gem spil knap -->
                    <Button Content="Gem Resultat" 
                            Command="{Binding SaveGameCommand}"
                            Height="35"
                            FontSize="14"
                            FontWeight="Bold"
                            Background="#5A5D62"
                            Foreground="White"
                            BorderThickness="0"
                            Margin="0,5"/>
                </StackPanel>
            </Border>
        </Grid>
    </Border>
</Window>